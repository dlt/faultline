<nav class="flex items-center justify-center gap-4">
  <% if page > 1 %>
    <%= link_to url_for(page: page - 1), class: "w-10 h-10 flex items-center justify-center rounded-full border border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-colors" do %>
      <span class="material-symbols-outlined">chevron_left</span>
    <% end %>
  <% else %>
    <span class="w-10 h-10 flex items-center justify-center rounded-full border border-slate-200 dark:border-slate-800 text-slate-300 dark:text-slate-600 cursor-not-allowed">
      <span class="material-symbols-outlined">chevron_left</span>
    </span>
  <% end %>

  <div class="flex items-center gap-2">
    <%
      window = 2
      start_page = [1, page - window].max
      end_page = [total_pages, page + window].min
    %>

    <% if start_page > 1 %>
      <%= link_to "1", url_for(page: 1), class: "w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300 transition-colors" %>
      <% if start_page > 2 %>
        <span class="w-10 h-10 flex items-center justify-center text-slate-400">...</span>
      <% end %>
    <% end %>

    <% (start_page..end_page).each do |p| %>
      <% if p == page %>
        <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-primary text-white font-bold"><%= p %></span>
      <% else %>
        <%= link_to p, url_for(page: p), class: "w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300 transition-colors" %>
      <% end %>
    <% end %>

    <% if end_page < total_pages %>
      <% if end_page < total_pages - 1 %>
        <span class="w-10 h-10 flex items-center justify-center text-slate-400">...</span>
      <% end %>
      <%= link_to total_pages, url_for(page: total_pages), class: "w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300 transition-colors" %>
    <% end %>
  </div>

  <% if page < total_pages %>
    <%= link_to url_for(page: page + 1), class: "w-10 h-10 flex items-center justify-center rounded-full border border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-colors" do %>
      <span class="material-symbols-outlined">chevron_right</span>
    <% end %>
  <% else %>
    <span class="w-10 h-10 flex items-center justify-center rounded-full border border-slate-200 dark:border-slate-800 text-slate-300 dark:text-slate-600 cursor-not-allowed">
      <span class="material-symbols-outlined">chevron_right</span>
    </span>
  <% end %>
</nav>
